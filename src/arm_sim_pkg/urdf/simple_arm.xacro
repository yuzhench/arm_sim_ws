<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro" name="simple_arm">

  <!-- 参数：连杆长度 -->
  <xacro:property name="l1" value="0.085"/>
  <xacro:property name="big_arm" value="0.35"/>
  <xacro:property name="small_arm" value="0.35"/>
  <xacro:property name="wrist" value="0.05"/>
  <xacro:property name="hand" value="0.15"/>

  <xacro:property name="small_big_joint_center_to_surface" value="0.0449"/>
  <xacro:property name="wrist_small_joint_center_to_surface" value="0.0166"/>
  <xacro:property name="wrist_arm_lenth" value="0.2009"/>
  <xacro:property name="hand_wrist_join_center_to_center" value="0.043498"/>













  <!-- <xacro:property name="l2" value="0.25"/> -->



  <link name="base_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
      <!-- 如果你的 BASE_LINKE_CP_STL.stl 在导出时 origin=joint 处，就不需要偏移 -->
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/BASE_LINKE_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/BASE_LINKE_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


  <!-- 根节点：把 link1_link（由宏生成）挂到 base_link -->
  <joint name="joint_base" type="continuous">
    <parent link="base_link"/>
    <child  link="link1_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>

     <!-- 围绕 Z 轴旋转，控制底座在 XY 平面内转 -->
    <axis  xyz="0 0 1"/>
    <limit  effort="5.0" velocity="1.0"/>
  </joint>


  <link name="link1_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
       <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_1_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_1_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


  <!-- connect the link1 and big arm -->
  <joint name="joint_base_big_arm" type="revolute">
    <parent link="link1_link"/>
    <child  link="big_arm_link"/>
    <origin xyz="0 0 ${l1}" rpy="0 0 0"/>
    <axis  xyz="1 0 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint>


   <link name="big_arm_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
       <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_2_BIG_ARM_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_2_BIG_ARM_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


    <!-- joint between the big arm & small arm -->
  <joint name="joint_big_arm_small_arm" type="revolute">
    <parent link="big_arm_link"/>
    <child  link="small_arm_link"/>
    <origin xyz="-${small_big_joint_center_to_surface} 0 ${big_arm}" rpy="0 0 0"/>
    <axis  xyz="1 0 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint>

  <link name="small_arm_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
       <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_3_SMALL_ARM_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_3_SMALL_ARM_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


  <!-- joint between the small arm & wrist -->
  <joint name="joint_small_arm_wrist" type="revolute">
    <parent link="small_arm_link"/>
    <child  link="wrist_link"/>
    <origin xyz="-${wrist_small_joint_center_to_surface} 0 ${small_arm}" rpy="0 0 0"/>
    <axis  xyz="1 0 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint>


  <link name="wrist_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
       <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_4_WRIST_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_4_WRIST_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


   <!-- joint between the wrist & hand -->
  <joint name="joint_wrist_hand" type="continuous">
    <parent link="wrist_link"/>
    <child  link="hand_link"/>
    <origin xyz="${hand_wrist_join_center_to_center} 0 ${wrist_arm_lenth}" rpy="0 0 0"/>
    <axis  xyz="0 0 1"/>
    <limit effort="2.0" velocity="1.0"/>
  </joint>


  <link name="hand_link">
    <!-- 可选：定义包名变量 -->
    <xacro:property name="pkg" value="arm_sim_pkg"/>

    <visual>
       <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_5_HAND_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh
          filename="package://${pkg}/meshes/LINK_5_HAND_CP_STL.stl"
          scale="1 1 1"/>
      </geometry>
    </collision>
  </link>


 
 










  <!-- 基座 -->
  <!-- <link name="base_link">
    <visual>
      <geometry><cylinder radius='0.1' length='0.2'/></geometry>
    </visual>
    <collision>
      <geometry><cylinder radius='0.1' length='0.2'/></geometry>
    </collision>
  </link> -->


  <!-- 根节点：把 link1_link（由宏生成）挂到 base_link -->
  <!-- <joint name="joint_base" type="continuous">
    <parent link="base_link"/>
    <child  link="link1_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>

     <axis  xyz="0 0 1"/>
    <limit  effort="5.0" velocity="1.0"/>
  </joint> -->



   <!-- 第一节连杆 -->
  <!-- <link name="link1_link">
    <visual>
       <origin xyz="0 0 ${l1/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${l1}"/></geometry>
    </visual>
    <collision>
      <origin xyz="0 0 ${l1/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${l1}"/></geometry>
    </collision>
  </link> -->


  <!-- 根节点：把 link1_link（由宏生成）挂到 base_link -->
  <!-- <joint name="joint_base_big_arm" type="revolute">
    <parent link="link1_link"/>
    <child  link="big_arm_link"/>
    <origin xyz="0 0 ${l1}" rpy="0 0 0"/>
    <axis  xyz="0 1 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint> -->


   <!-- small arm link  -->
  <!-- <link name="big_arm_link">
    <visual>
       <origin xyz="0 0 ${big_arm/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${big_arm}"/></geometry>
      <material name="Blue"><color rgba="0 0 1 1"/></material>

    </visual>
    <collision>
      <origin xyz="0 0 ${big_arm/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${big_arm}"/></geometry>
    </collision>
  </link> -->



  <!-- joint between the big arm & small arm -->
  <!-- <joint name="joint_big_arm_small_arm" type="revolute">
    <parent link="big_arm_link"/>
    <child  link="small_arm_link"/>
    <origin xyz="0 0 ${big_arm}" rpy="0 0 0"/>
    <axis  xyz="0 1 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint> -->


   <!-- small arm link  -->
  <!-- <link name="small_arm_link">
    <visual>
       <origin xyz="0 0 ${small_arm/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${small_arm}"/></geometry>
      <material name="green"><color rgba="0 1 0 1"/></material>

    </visual>
    <collision>
      <origin xyz="0 0 ${small_arm/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${small_arm}"/></geometry>
    </collision>
  </link> -->


   <!-- joint between the small arm & wrist -->
  <!-- <joint name="joint_small_arm_wrist" type="revolute">
    <parent link="small_arm_link"/>
    <child  link="wrist_link"/>
    <origin xyz="0 0 ${small_arm}" rpy="0 0 0"/>
    <axis  xyz="0 1 0"/>
    <limit lower="-1.047" upper="1.047" effort="2.0" velocity="1.0"/>
  </joint> -->


   <!-- wrist link  -->
  <!-- <link name="wrist_link">
    <visual>
       <origin xyz="0 0 ${wrist/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${wrist}"/></geometry>
      <material name="orange"><color rgba="1 0.7 0 1"/></material>

    </visual>
    <collision>
      <origin xyz="0 0 ${wrist/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${wrist}"/></geometry>
    </collision>
  </link> -->


  <!-- joint between the wrist & hand -->
  <!-- <joint name="joint_wrist_hand" type="continuous">
    <parent link="wrist_link"/>
    <child  link="hand_link"/>
    <origin xyz="0 0 ${wrist}" rpy="0 0 0"/>
    <axis  xyz="0 0 1"/>
    <limit effort="2.0" velocity="1.0"/>
  </joint> -->


   <!-- wrist link  -->
  <!-- <link name="hand_link">
    <visual>
       <origin xyz="0 0 ${hand/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${hand}"/></geometry>
      <material name="purple"><color rgba="0.5 0 0.5 1"/></material>

    </visual>
    <collision>
      <origin xyz="0 0 ${hand/2}" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 ${hand}"/></geometry>
    </collision>
  </link> -->



</robot>
